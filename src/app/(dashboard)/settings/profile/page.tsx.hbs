"use server";
import SettingProfileClient from "@/components/Dashboard/Settings/Profile/SettingProfileClient";
import { getUserById } from "@/utils/users-api";
import { cookies } from "next/headers";

export default async function Profile() {
  const getUser = async () => {
    const id = cookies().get("user_id")?.value;
    const token = cookies().get("session")?.value;
    if (id) {
      try {
        const res = await getUserById(id, token);
        return res.data.data;
      } catch (err) {
        console.log(err);
        return null;
      }
    }
    return null;
  };

  const initData = await getUser();
  return <SettingProfileClient initData={initData} />;
}
